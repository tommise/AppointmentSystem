{% extends "layout.html" %}
 
{% block body %}
{{ error }}
 
<h3>Update an appointment</h3>
<p></p>
<p>Please update appointment of choice by clicking "Update".</p>
<p>Listing is automatically ordered by appointment time in ascending order. Updated time may not stay in the same line.</p>
<p></p>
 
  <table class="table table-sm table-hover">
    <tr>
      <th>Appointment</th>
      <th>Employee</th>
      <th>User</th>
      <th>Reserved</th>
      <th>Update appointment time</th>
      <th>Update employee</th>
      <th>Update user</th>
      <th>Update reserved</th>      
    </tr>
    {% for appointment in appointments %}
    <tr>
      <td>{{ appointment.start_time }}</td>  
      <td>{{ appointment.accountappointment[0].username }}</td>
 
      {% if appointment.accountappointment[1] is defined %}
      <td>{{ appointment.accountappointment[1].username }}</td>
      {% else %}
      <td></td>
      {% endif %}
 
      <td>{{ appointment.reserved }} </td>  
      
            <form method="POST" action="{{ url_for('appointments_updates', appointment_id=appointment.id) }}">          
              <td>{{ form.start_time }}</td>
 
              <td>{{ form.employees }}</td>
              <ul>
                  {% for error in form.employees.errors %}
                  <li>{{ error }}</li>
                  {% endfor %}
                </ul>  
 
              <td>{{ form.users }} </td>
              <ul>
                  {% for error in form.users.errors %}
                  <li>{{ error }}</li>
                  {% endfor %}
              </ul>  
 
              <td>{{ form.reserved }}</td>   
              <td><input type="submit" value="Update"/></td>                            
            </form>      
                
              </tr>
              {% endfor %}
            </table>        
 
{% endblock %}
